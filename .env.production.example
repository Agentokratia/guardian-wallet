# =============================================================================
# Guardian Wallet — Production Environment
# =============================================================================
#
# Copy this file to .env and replace every placeholder marked CHANGE-ME.
# All values without CHANGE-ME have sensible production defaults.
#
# Both the server and the dashboard read from this file (root .env).
#
# =============================================================================

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │  SERVER                                                                     │
# └─────────────────────────────────────────────────────────────────────────────┘

NODE_ENV=production
PORT=8080

# ── Supabase (PostgreSQL) ────────────────────────────────────────────────────
# Use your managed Supabase project URL and service role key.
SUPABASE_URL=https://CHANGE-ME.supabase.co
SUPABASE_SERVICE_KEY=CHANGE-ME

# ── KMS (share encryption backend) ──────────────────────────────────────────
# vault-kv: HashiCorp Vault KV v2 (recommended for production).
# local-file: AES-256-GCM with a master key file (single-server only).
KMS_PROVIDER=vault-kv
VAULT_ADDR=https://CHANGE-ME:8200
VAULT_TOKEN=CHANGE-ME
VAULT_KV_MOUNT=secret
VAULT_SHARE_PREFIX=threshold/shares

# Uncomment below (and comment out Vault vars above) for local-file KMS:
# KMS_PROVIDER=local-file
# KMS_LOCAL_KEY_FILE=/opt/guardian/master.key

# ── Authentication ──────────────────────────────────────────────────────────
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE-ME
JWT_EXPIRY=24h

# ── WebAuthn (Passkey Authentication) ───────────────────────────────────────
# RP_ID MUST match the exact domain your dashboard is served from.
# No protocol, no port — just the domain (e.g., guardian.example.com).
RP_ID=CHANGE-ME
RP_NAME=Guardian Wallet

# ── Email (OTP delivery) ───────────────────────────────────────────────────
# Use Resend for real email delivery in production.
EMAIL_PROVIDER=resend
RESEND_API_KEY=CHANGE-ME

# ── CORS ────────────────────────────────────────────────────────────────────
# Set to your dashboard's public URL.
ALLOWED_ORIGINS=https://CHANGE-ME

# ── AuxInfo Pool (DKG acceleration) ─────────────────────────────────────────
AUXINFO_POOL_TARGET=5
AUXINFO_POOL_LOW_WATERMARK=2
AUXINFO_POOL_MAX_GENERATORS=2

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │  DASHBOARD (Vite reads only VITE_* vars from this file)                     │
# └─────────────────────────────────────────────────────────────────────────────┘

# REQUIRED in production: the server's public URL.
VITE_API_URL=https://CHANGE-ME
